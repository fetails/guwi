<!DOCTYPE html>
<html>
    <head>
        <title>collision</title>
    </head>
    <body>
        <style>
            html, body
            {
                margin:0;
                padding:0;
                overflow:hidden;
            }
        </style>
        <canvas style="border:1px solid rgb(0, 0, 0);"></canvas>
        <script>
            let canvas=document.querySelector("canvas"),context=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let c_platform=class{constructor(){this.x=200,this.y=500,this.w=500,this.h=25}render_text(t,e){context.font="14px Arial",context.fillStyle="#fff",context.fillText(t,e.x,e.y)}render(){context.fillStyle="#45A6BC",context.fillRect(this.x,this.y,this.w,this.h),this.render_text("platform",{x:this.x,y:this.y-80}),this.render_text("x",{x:this.x,y:this.y-10}),this.render_text("w",{x:this.x+this.w-10,y:this.y-10}),this.render_text("y",{x:this.x+this.w+5,y:this.y+6}),this.render_text("h",{x:this.x+this.w+5,y:this.y+this.h-2})}get aabb(){return{x:this.x,y:this.y,w:this.w,h:this.h}}};const keyboard={w:87,a:65,s:83,d:68,space:32};let c_player=class{constructor(t){this.x=240,this.y=90,this.w=25,this.h=25,this.velocity={x:0,y:0},this.on_ground=!1,this.platform=t,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,document.onkeydown=(t=>{t.keyCode==keyboard.a&&(this.moveLeft=!0),t.keyCode==keyboard.space&&(this.moveUp=!0),t.keyCode==keyboard.d&&(this.moveRight=!0)}),document.onkeyup=(t=>{t.keyCode==keyboard.a&&(this.moveLeft=!1),t.keyCode==keyboard.space&&(this.moveUp=!1),t.keyCode==keyboard.d&&(this.moveRight=!1)})}setupPlayer(t=25,e=25){document.onmousemove=(t=>{this.x=t.clientX,this.y=t.clientY}),this.w=t,this.h=e}render_text(t,e){context.font="14px Arial",context.fillStyle="#fff",context.fillText(t,e.x,e.y)}is_colliding_top(){let t=this.platform.aabb;return this.x+this.w>t.x&&this.x<t.x+t.w&&this.y+this.h>t.y-4&&this.y+this.h<t.y+4}clamp_movement(){this.velocity.x>6?this.velocity.x=6:this.velocity.x<-6&&(this.velocity.x=-6),this.velocity.y>8?this.velocity.y=8:this.velocity.y<-8&&(this.velocity.y=-8)}movement(){this.on_ground?this.moveUp?(this.velocity.y-=1,this.on_ground=!0):this.velocity.y=0:this.velocity.y+=.06,this.moveRight?this.velocity.x+=.06:this.velocity.x>.06&&(this.velocity.x-=.06),this.moveLeft?this.velocity.x-=.06:this.velocity.x<0&&(this.velocity.x+=.06),this.y+this.h>canvas.height&&(this.y=0),this.y+=this.velocity.y,this.x+=this.velocity.x,this.clamp_movement()}render(){if(context.fillStyle=this.is_colliding_top()?"#BC456B":"#9C7984",context.fillRect(this.x,this.y,this.w,this.h),this.movement(),this.render_text(this.on_ground?"OnGround: true ":"OnGround: false",{x:20,y:20}),this.render_text("velocity (x: "+this.velocity.x+", y: "+this.velocity.y+")",{x:20,y:40}),this.render_text("remicks.site",{x:20,y:60}),this.is_colliding_top()){this.on_ground=!0;let t=this.platform.aabb;this.y=t.y-this.h}else this.on_ground=!1}},plat=new c_platform,mouse=new c_player(plat),loop_callback=()=>{context.clearRect(0,0,canvas.width,canvas.height),context.fillStyle="rgba( 25, 25, 25, 255 )",context.fillRect(0,0,canvas.width,canvas.height),plat.render(),mouse.render(),window.requestAnimationFrame(loop_callback)};window.requestAnimationFrame(loop_callback);
        </script>
    </body>
</html>
</html>